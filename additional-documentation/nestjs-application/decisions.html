<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>schulcloud-server documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../../images/favicon.ico">
	   <link rel="stylesheet" href="../../styles/style.css">
        <link rel="stylesheet" href="../../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../../" class="navbar-brand">schulcloud-server documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content additional-page">
                   <div class="content-data">



















<h1 id="decisions">Decisions</h1>
<h2 id="architecture-decisions">Architecture decisions</h2>
<h3 id="solid">SOLID</h3>
<p>Solution: NestJS</p>
<h3 id="typescript">TypeScript</h3>
<p>Solution: Use in schulcloud-server, extend strong typing over the api via openAPI and use it in nuxt-client.</p>
<h4 id="strict-settings-property-initialization">Strict settings: Property Initialization</h4>
<p>Due to different ways of how instances are generated while we focus on having strict settings enabled by default, we have the following exceptions for <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html#strict-class-initialization">strict property initialization</a> defined:</p>
<ul>
<li>reponse dtos (generated in controllers by mappers based on entities) will get constructors added for setting all or at least all required properties via constructors</li>
<li>request dtos will use ! on properties ang do not get constructors added. The validity must be defined by and match with class validator decorators on properties. The application then will generate valid instances on input data. </li>
<li>for entity id and _id the developer must know if the values are present or not depending on persistence state of an entity</li>
<li>all other classes should use complete constructors, and avoid use of ! on properties, especially all providers, and entities for application use and testing</li>
<li>legacy code might have got some ! added which should be removed and get constructors added correctly.</li>
</ul>
<h3 id="mikro-orm">Mikro-ORM</h3>
<h4 id="typescript-support">Typescript Support</h4>
<ul>
<li>strong typed entities</li>
<li>provide meta data through:<ul>
<li>classes</li>
<li>decorators (on classes, properties)<h4 id="mongodb-support">MongoDB Support</h4>
</li>
</ul>
</li>
<li>full Support for MongoDB</li>
<li>(as opposed to e.g. TypeORM, Prisma)</li>
</ul>
<h4 id="unit-of-work">Unit of Work</h4>
<ul>
<li>implicit transactions</li>
<li>managed entities / references</li>
<li>collect changes</li>
<li>em.flush()</li>
</ul>
<h4 id="identity-map">Identity Map</h4>
<ul>
<li>always get the same instance of one entity</li>
<li>good for:<ul>
<li>optimizations</li>
<li>caching</li>
<li>comparison by identity</li>
</ul>
</li>
<li>request scope in web applications</li>
</ul>
<h4 id="database-agnostic">Database agnostic</h4>
<ul>
<li>can be used with different databases (SQL/NoSQL)</li>
</ul>
<h4 id="relation-mapping">Relation mapping</h4>
<ul>
<li>1:n, 1:1, m:n</li>
<li>foreign collection relations</li>
<li>embedded relations (MongoDB)</li>
</ul>
<h4 id="preloading">Preloading</h4>
<ul>
<li>nested structures can be preloaded via populate</li>
</ul>
<h4 id="misc">Misc</h4>
<ul>
<li>use serialized mongo-id</li>
</ul>
<h4 id="issues">Issues</h4>
<ul>
<li>no join queries in MongoDB</li>
<li>no populate in queries over relations</li>
</ul>

                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 2;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'additional-page';
            var COMPODOC_CURRENT_PAGE_URL = 'decisions.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../../js/libs/custom-elements.min.js"></script>
       <script src="../../js/libs/lit-html.js"></script>

       <script src="../../js/menu-wc.js" defer></script>
       <script nomodule src="../../js/menu-wc_es5.js" defer></script>

       <script src="../../js/libs/bootstrap-native.js"></script>

       <script src="../../js/libs/es6-shim.min.js"></script>
       <script src="../../js/libs/EventDispatcher.js"></script>
       <script src="../../js/libs/promise.min.js"></script>
       <script src="../../js/libs/zepto.min.js"></script>

       <script src="../../js/compodoc.js"></script>

       <script src="../../js/tabs.js"></script>
       <script src="../../js/menu.js"></script>
       <script src="../../js/libs/clipboard.min.js"></script>
       <script src="../../js/libs/prism.js"></script>
       <script src="../../js/sourceCode.js"></script>
          <script src="../../js/search/search.js"></script>
          <script src="../../js/search/lunr.min.js"></script>
          <script src="../../js/search/search-lunr.js"></script>
          <script src="../../js/search/search_index.js"></script>
       <script src="../../js/lazy-load-graphs.js"></script>


    </body>
</html>
